<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <div id="container"></div>
  <script>
    // 方式一一次性插入
    // let now = Date.now()
    // let container = document.getElementById('container')
    // for (let i = 0; i < 100000; i++) {
    //   let li = document.createElement('span')
    //   li.innerText = i + '--'
    //   container.appendChild(li)
    // }
    // console.log('JS执行总时长',Date.now() - now)
    // setTimeout(() => {
    //   console.log('渲染总时长',Date.now() - now)
    // }, 0);
    // 分批渲染
    //需要插入的容器
let ul = document.getElementById('container');
// 插入十万条数据
let total = 10000;
// 一次插入 20 条
let once = 20;
//总页数
let page = total/once
//每条记录的索引
let index = 0;
//循环加载数据
function loop(curTotal,curIndex){
    if(curTotal <= 0){
        return false;
    }
    //每页多少条
    let pageCount = Math.min(curTotal , once);
    setTimeout(()=>{
        for(let i = 0; i < pageCount; i++){
            let li = document.createElement('li');
            li.innerText = curIndex + i + ' : ' + ~~(Math.random() * total)
            ul.appendChild(li)
        }
        loop(curTotal - pageCount,curIndex + pageCount)
    },0)
}
loop(total,index);
//需要插入的容器
// let ul = document.getElementById('container');
// // 插入十万条数据
// let total = 100000;
// // 一次插入 20 条
// let once = 20;
// //总页数
// let page = total/once
// //每条记录的索引
// let index = 0;
// //循环加载数据
// function loop(curTotal,curIndex){
//     if(curTotal <= 0){
//         return false;
//     }
//     //每页多少条
//     let pageCount = Math.min(curTotal , once);
//     window.requestAnimationFrame(function(){
//         for(let i = 0; i < pageCount; i++){
//             let li = document.createElement('li');
//             li.innerText = curIndex + i + ' : ' + ~~(Math.random() * total)
//             ul.appendChild(li)
//         }
//         loop(curTotal - pageCount,curIndex + pageCount)
//     })
// }
// loop(total,index);


  </script>
</body>
</html>